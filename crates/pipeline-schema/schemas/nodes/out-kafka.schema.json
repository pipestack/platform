{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "./schemas/nodes/out-kafka.schema.json",
  "type": "object",
  "required": ["brokers", "topic"],
  "properties": {
    "brokers": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[^:]+:\\d+$"
      },
      "minItems": 1,
      "description": "Kafka broker addresses"
    },
    "topic": {
      "type": "string",
      "minLength": 1,
      "description": "Topic to produce to"
    },
    "partition_key": {
      "type": "string",
      "description": "Field to use for partitioning"
    },
    "compression": {
      "enum": ["none", "gzip", "snappy", "lz4"],
      "default": "none",
      "description": "Message compression"
    },
    "acks": {
      "enum": ["0", "1", "all"],
      "default": "1",
      "description": "Acknowledgment level"
    },
    "batch_size": {
      "type": "integer",
      "minimum": 1,
      "default": 100,
      "description": "Producer batch size"
    }
  }
}